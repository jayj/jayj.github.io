/*!
	jQuery ColorBox v2.0.0-alpha
	(c) 2013 Jack Moore - jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
!function(t,e,o){function i(e,i){return Math.round((/%/.test(e)?("x"===i?t(o).width():t(o).height())/100:1)*parseInt(e,10))}function n(o){!g&&e.body&&(f={},t.each(x,function(e){t(o).is(e)&&t.extend(f,x[e])}),t.colorbox.element=o,p?(t(e).trigger("cbox.unload"),t.colorbox.getSetting("onUnload")):(p=u=!0,s=t(t.colorbox.getSetting("structure")),a=t(".cbox-body",s),c=t(".cbox-content",s),s.appendTo(e.body),t(e.body).addClass("cbox_open"),l=a.outerHeight(!0),h=a.outerWidth(!0),s.css({visibility:"visible"}),d={},d.width=i(t.colorbox.getSetting("initialWidth"),"x"),d.height=i(t.colorbox.getSetting("initialHeight"),"y"),t.colorbox.position(),t("cbox-close").html(t.colorbox.getSetting("close")),t.colorbox.getSetting("group")?(t.colorbox.group=t(t.colorbox.getSetting("group")),t.colorbox.index=t.colorbox.group.index(t.colorbox.element),-1===t.colorbox.index&&(t.colorbox.group=t.colorbox.group.add(t.colorbox.element),t.colorbox.index=t.colorbox.group.length-1)):(t.colorbox.index=0,t.colorbox.group=t(t.colorbox.element)),t.each(t.colorbox.modules,function(){t.isFunction(this)&&this()}),a.focus(),t.colorbox.getSetting("returnFocus")&&t(e).one("cbox.closed",function(){t(o).trigger("focus")}),t(e).trigger("cbox.open"),t.colorbox.getSetting("onOpen")),t(e).trigger("cbox.load"),t.colorbox.getSetting("onLoad"),u=!0)}function r(o){function n(){return d.width=d.width||c.width(),d.width=d.maxWidth&&d.maxWidth<d.width?d.maxWidth:d.width,d.width}function r(){return d.height=d.height||c.height(),d.height=d.maxHeight&&d.maxHeight<d.height?d.maxHeight:d.height,d.height}if(p){var s,u="none"===t.colorbox.getSetting("transition")?0:t.colorbox.getSetting("speed");d={minWidth:0,minHeight:0,width:!1,height:!1,maxWidth:!1,maxHeight:!1},t.colorbox.getSetting("minWidth")&&(d.minWidth=i(t.colorbox.getSetting("minWidth"),"x")-h),t.colorbox.getSetting("minHeight")&&(d.minHeight=i(t.colorbox.getSetting("minHeight"),"y")-l),d.maxHeight=d.height=t.colorbox.getSetting("height")?i(t.colorbox.getSetting("height"),"y")-l:t.colorbox.getSetting("innerHeight")&&i(t.colorbox.getSetting("innerHeight"),"y"),d.maxWidth=d.width=t.colorbox.getSetting("width")?i(t.colorbox.getSetting("width"),"x")-h:t.colorbox.getSetting("innerWidth")&&i(t.colorbox.getSetting("innerWidth"),"x"),t.colorbox.getSetting("maxWidth")&&(d.maxWidth=i(t.colorbox.getSetting("maxWidth"),"x")-h,d.maxWidth=d.width&&d.width<d.maxWidth?d.width:d.maxWidth),t.colorbox.getSetting("maxHeight")&&(d.maxHeight=i(t.colorbox.getSetting("maxHeight"),"y")-l,d.maxHeight=d.height&&d.height<d.maxHeight?d.height:d.maxHeight),c.empty().css({width:"",height:"",visibility:"hidden",display:"inline-block"}).appendTo(e.body).append(o).css({width:n(),overflow:t.colorbox.getSetting("scrolling")?"auto":"hidden"}).css({height:r()}).css({visibility:""}).prependTo(a),c.css({width:"100%",height:"100%"}),s=function(){p&&(t(".cbox-title").html(t.colorbox.getSetting("title")),c.show(),t(e).trigger("cbox.complete"),t.colorbox.getSetting("onComplete"))},t.colorbox.position(u,s)}}if(!t.colorbox){var s,a,c,l,h,p,u,g,d,x={},f={};t.colorbox=function(o,i){o&&(x[o]=i||{},t(e).on("click.colorbox",o,function(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),n(this))}),i&&i.open&&t(o)[0]&&n(t(o)[0]))},t.colorbox.getSetting=function(e){var o;return o=void 0!==f[e]?f[e]:t.colorbox.settings[e],t.isFunction(o)?o.call(t(t.colorbox.element)):o},t.colorbox.settings={transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,source:function(){return t(this).attr("href")},title:function(){return t(this).attr("title")},rel:function(){return t(this).attr("data-rel")},type:function(){return t.colorbox.getSetting("photoRegex").test(t.colorbox.getSetting("source"))?"photo":"ajax"},className:!1,group:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,loop:!0,photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:!1,onUnload:!1,onLoad:!1,onComplete:!1,onClosed:!1,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,structure:"<div class='cbox-root'><div class='cbox-body' role='dialog' tabindex='-1'><div class='cbox-content'></div><button class='cbox-prev' type='button'></button><button class='cbox-next' type='button'></button><div class='cbox-current'></div><div class='cbox-title'></div><button class='cbox-close' type='button'></button></div></div>"},t.colorbox.modules={closeButton:function(){t(e).on("click.cbox",".cbox-close",t.colorbox.close)},nextButton:function(){t(e).on("click.cbox",".cbox-next",t.colorbox.next)},prevButton:function(){t(e).on("click.cbox",".cbox-prev",t.colorbox.prev)},overlayClick:function(){t(e).on("click.cbox",".cbox-root",function(e){e.target===this&&t.colorbox.close()})},photoClick:function(){t(e).on("click.cbox",".cbox-photo",t.colorbox.next)},esc:function(){t(e).on("keydown.cbox",function(e){27===e.keyCode&&(e.preventDefault(),t.colorbox.close())})},leftArrow:function(){t(e).on("keydown.cbox",function(e){37===e.keyCode&&t.colorbox.group.length&&(e.preventDefault(),t.colorbox.prev())})},rightArrow:function(){t(e).on("keydown.cbox",function(e){39===e.keyCode&&t.colorbox.group.length&&(e.preventDefault(),t.colorbox.next())})},resize:function(){t(e).on("resize.cbox",function(){t.colorbox.position()})},trapFocus:function(){function o(e){var o=t(".cbox-body")[0];o&&!o.contains(e.target)&&(e.stopPropagation(),t(o).trigger("focus"))}e.addEventListener&&(e.addEventListener("focus",o,!0),t(e).one("cbox.closed",function(){e.removeEventListener("focus",o,!0)}))},preload:function(){t(e).on("cbox.complete",function(){if(t.colorbox.group.length){var o=t.colorbox.index+1<t.colorbox.group.length?t.colorbox.index+1:0,i=t.colorbox.index-1<0?t.colorbox.group.length-1:t.colorbox.index-1;t.each([o,i],function(){var o,i,n=t.colorbox.group[this],r=t.data(n,"colorbox");r&&r.href?(o=r.href,t.isFunction(o)&&(o=o.call(n))):o=t(n).attr("href"),o&&(t.colorbox.getSetting("photo")||t.colorbox.getSetting("photoRegex").test(o))&&(i=e.createElement("img"),i.src=o)})}})},loading:function(){var o;t(e).on("cbox.load",function(){o=setTimeout(function(){t(e.body).addClass("cbox_loading")},100)}).on("cbox.complete cbox.unload",function(){clearTimeout(o),t(e.body).removeClass("cbox_loading")})},photo:function(){t(e).on("cbox.load",function(){if("photo"===t.colorbox.getSetting("type")){var i=t.colorbox.getSetting("source"),n=e.createElement("img");t.colorbox.getSetting("retinaUrl")&&o.devicePixelRatio>1&&(i=i.replace(t.colorbox.getSetting("photoRegex"),t.colorbox.getSetting("retinaSuffix"))),t(n).addClass("cbox-photo").on("error",function(){r(t('<div class="cbox-error"/>').html(t.colorbox.getSetting("imgError")))}).one("load",function(){t.colorbox.getSetting("retinaImage")&&o.devicePixelRatio>1&&(n.height=n.height/o.devicePixelRatio,n.width=n.width/o.devicePixelRatio),t(n).css({marginTop:-n.height/2+"px",marginLeft:-n.width/2+"px",width:n.width+"px",height:n.height+"px"}),n.alt=t(t.colorbox.element).attr("alt")||t(t.colorbox.element).attr("data-alt")||"",n.longdesc=t(t.colorbox.element).attr("longdesc"),r(t("<div/>").css({width:n.width,height:n.height}).append(n))}),n.src=i}})},inline:function(){t(e).on("cbox.load",function(){if("inline"===t.colorbox.getSetting("type")){var o=t(t.colorbox.getSetting("source")),i=t("<div/>").hide().insertBefore(o[0]);t(e).on("cbox.unload",function(){i.replaceWith(o)}),r(o)}})},iframe:function(){if("iframe"===t.colorbox.getSetting("type")){var o=t('<iframe class="cbox-iframe"/>')[0];t(e).on("cbox.load",function(){t(o).attr({name:(new Date).getTime(),allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowTransparency:!0,frameBorder:0,scrolling:t.colorbox.getSetting("scrolling")?"yes":"no"}),r(o)}),t(e).on("cbox.complete",function(){o.src=t.colorbox.getSetting("source")}),t(e).one("cbox.unload",function(){o.src=""})}},ajax:function(){"ajax"!==t.colorbox.getSetting("type")},html:function(){if("html"===t.colorbox.getSetting("type")){var e=t.colorbox.getSetting("source");e&&r(e)}},className:function(){var o;t(e).on("cbox.load",function(){s.removeClass(o),o=t.colorbox.getSetting("className")})},grouping:function(){var o,i=t(".cbox-next"),n=t(".cbox-prev"),r=t(".cbox-current");t(e).on("cbox.complete",function(){var s=t.colorbox.getSetting("loop");t.colorbox.group.length>1?(t(e.body).addClass("cbox_grouped"),o=t.colorbox.getSetting("current"),"string"==typeof o&&r.html(o.replace("{current}",t.colorbox.index+1).replace("{total}",t.colorbox.group.length)),i[s||t.colorbox.index<t.colorbox.group.length-1?"removeClass":"addClass"]("cbox-disabled"),i.html(t.colorbox.getSetting("next")),n[s||t.colorbox.index?"removeClass":"addClass"]("cbox-disabled"),n.html(t.colorbox.getSetting("prev"))):t(e.body).removeClass("cbox_grouped")})},slideshow:function(){}},t.colorbox.position=function(e,n){var r,s=0,c=0;c+=t.colorbox.getSetting("right")!==!1?Math.max(t(o).width()-d.width-h-i(t.colorbox.getSetting("right"),"x"),0):t.colorbox.getSetting("left")!==!1?i(t.colorbox.getSetting("left"),"x"):Math.round(Math.max(t(o).width()-d.width-h,0)/2),s+=t.colorbox.getSetting("bottom")!==!1?Math.max(t(o).height()-d.height-l-i(t.colorbox.getSetting("bottom"),"y"),0):t.colorbox.getSetting("top")!==!1?i(t.colorbox.getSetting("top"),"y"):Math.round(Math.max(t(o).height()-d.height-l,0)/2),e=a.width()===d.width&&a.height()===d.height?0:e||0,r={width:d.width+h,height:d.height+l,top:s,left:c},a.dequeue().animate(r,{duration:e,complete:function(){u=!1,n&&n()}})},t.colorbox.next=function(){!u&&t.colorbox.group.length&&(t.colorbox.getSetting("loop")||t.colorbox.group[t.colorbox.index+1])&&(t.colorbox.index=t.colorbox.index+1<t.colorbox.group.length?t.colorbox.index+1:0,n(t.colorbox.group[t.colorbox.index]))},t.colorbox.prev=function(){!u&&t.colorbox.group.length&&(t.colorbox.getSetting("loop")||t.colorbox.index)&&(t.colorbox.index=t.colorbox.index-1<0?t.colorbox.group.length-1:t.colorbox.index-1,n(t.colorbox.group[t.colorbox.index]))},t.colorbox.close=function(){p&&!g&&(g=!0,p=!1,s.stop().fadeTo(t.colorbox.getSetting("fadeOut")||0,0,function(){t(e).trigger("cbox.unload"),t.colorbox.getSetting("onUnload"),s.remove(),t(e.body).removeClass("cbox_open"),t(e).trigger("cbox.closed"),t.colorbox.getSetting("onClosed"),t(e).off(".cbox").off("cbox"),g=!1,f={},t.colorbox.index=null,t.colorbox.group=null,t.colorbox.element=null}))},t.colorbox.remove=function(){x={},f.fadeOut=0,t(e).off("click.colorbox"),t.colorbox.close()},t.colorbox.index=null,t.colorbox.group=null,t.colorbox.element=null}}(jQuery,document,window);
